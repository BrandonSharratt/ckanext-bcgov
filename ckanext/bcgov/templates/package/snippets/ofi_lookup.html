{% set ofi = data.ofi %}

{# button for modal is in snippets/resource_form.html #}
{#<a href="#ofi-results" role="button" class="btn btn-primary" data-toggle="modal">View OFI Results</a>#}

{# TODO: deal with bcgov.ofi.enable = false #}

<div id="ofi-results" class="modal hide fade" tabindex="-1" role="dialog"
  data-module="ofi_lookup"
  data-module-ofi_results="{{ h.dump_json(ofi) }}"
  data-module-package_id="{{ pkg_id }}"
  data-module-object_name="{{ pkg_obj_name or false }}"
  data-module-ofi_geo_resource_form_url="{{ h.url_for('ofi api', call_action='geo_resource_form') }}"
  data-module-ofi_populate_dataset_url="{{ h.url_for('ofi api', call_action='populate_dataset') }}"
>

  <div class="modal-header">
    <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
    <h3>Manage OFI Resources</h3>
    <h4 id="modal-subtitle">Checking Availability</h4>
  </div>

  <div class="modal-body">
    <form id="ofi-lookup-form" class="form-horizontal">
      <div id="resources">
      
      </div>
    </form>

    {# TODO: stop animation when not visible #}
    <div id="loading" class="overlay-wrap">
      <div class="add-data-loader">Loading...</div>
    </div>
  </div>

  <div class="modal-footer">
    <button class="btn" data-dismiss="modal" aria-hidden="true">Close</button>
    <button id="ofi-confirm" class="btn btn-primary">Yes</button>
  </div>
</div>

{% resource 'edc_resource/ofi/ofi_lookup.js' %}
{% resource 'edc_resource/ofi/ofi_style.css' %}
